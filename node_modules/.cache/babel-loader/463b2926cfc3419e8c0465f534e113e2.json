{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\shibapad_staking-main (2)\\\\shibapad_staking-main\\\\src\\\\component\\\\StakingBox.js\";\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport shiba from '../assets/shiba.png';\nimport Store from '../store/store';\nimport Input from './Input';\nimport { Text, Row } from './style';\nimport { useObserver } from 'mobx-react';\nimport { useAlert } from 'react-alert';\n\nconst StakingBox = () => {\n  const alert = useAlert();\n  const [stakingInfo, setStakingInfo] = useState({});\n  const [stakingAmount, setStakingAmount] = useState('');\n  const [disable, setDisable] = useState(true);\n  useEffect(() => {\n    if (stakingInfo.storageId && stakingAmount && Store.account && Number(stakingInfo.minAmount) <= Number(stakingAmount) && Number(stakingAmount) <= Number(Store.stakingInfo.SBPBalance)) setDisable(false);else setDisable(true);\n  }, [Store.stakingInfo.SBPBalance, Store.account, stakingAmount, stakingInfo]);\n\n  const handleSelect = info => setStakingInfo(info);\n\n  const handleAmount = e => {\n    const {\n      value\n    } = e.target;\n    if (value && value > 0) setStakingAmount(value);\n    if (!value) setStakingAmount('');\n  };\n\n  const handleStake = async () => {\n    Store.getSBPBalance().then(async res => {\n      if (res && Store.account && stakingAmount > 0 && Number(stakingAmount) <= Number(Store.stakingInfo.SBPBalance)) {\n        await Store.stakeSBP({\n          amount: stakingAmount,\n          storageId: stakingInfo.storageId\n        }).then(res => {\n          if (res) console.log('box', res);\n\n          if (res.result) {\n            // success\n            alert.show(res.msg, {\n              type: 'success'\n            });\n            Store.fetchAccountInfo(); // TVL, staking balance, total Expected Reward, tier, sbp balance, stakingList\n          } else {\n            // fail\n            alert.show(res.msg, {\n              type: 'error'\n            });\n          }\n        });\n      } else {//balance err 표시\n      }\n    });\n  };\n\n  return useObserver(() => {\n    return /*#__PURE__*/React.createElement(StakingWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(SelectWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#ffffff\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, \"Total Value Locked : \"), /*#__PURE__*/React.createElement(Text, {\n      color: \"#f6c179\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, Store.stakingInfo.TVL, \" SBP\")), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#ffffff\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Release Date : \")), /*#__PURE__*/React.createElement(SelectBoxWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, Store.stakingPool && Store.stakingPool.length > 0 && Store.stakingPool.map((elem, index) => {\n      return /*#__PURE__*/React.createElement(SelectBox, {\n        checked: stakingInfo.storageId === elem.storageId,\n        onClick: () => handleSelect(elem),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 19\n        }\n      }, elem.name);\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#ffffff\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, \"APY for \"), /*#__PURE__*/React.createElement(Text, {\n      color: \"#66ac5b\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, stakingInfo.name ? `${stakingInfo.name} : ` : null), /*#__PURE__*/React.createElement(Text, {\n      color: \"#f6c179\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, stakingInfo.rewardPercentage ? `${stakingInfo.rewardPercentage}%` : null)), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#ffffff\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, \"Minimum Amount : \"), /*#__PURE__*/React.createElement(Text, {\n      color: \"#f6c179\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, stakingInfo.minAmount ? `${stakingInfo.minAmount} SBP` : null))), /*#__PURE__*/React.createElement(StakingInfoWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FlexDiv, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(StakingInfo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#d5ccc8\",\n      width: \"10rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, \"Your SBPS in Staking :\", ' '), /*#__PURE__*/React.createElement(Text, {\n      color: \"#f6c179\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, Store.stakingInfo.accountStakingTotal, \" SBP\", ' ')), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#d5ccc8\",\n      width: \"10rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, \"ToTal Expected Reward :\", ' '), /*#__PURE__*/React.createElement(Text, {\n      color: \"#f6c179\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, Store.stakingInfo.totalExpectedReward, \"%\", ' ')), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#d5ccc8\",\n      width: \"10rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \"Account Tier :\"), /*#__PURE__*/React.createElement(Text, {\n      color: \"#f6c179\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, Store.stakingInfo.tier, \" \")), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      color: \"#d5ccc8\",\n      width: \"10rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, \"Account SBP Balance :\", ' '), /*#__PURE__*/React.createElement(Text, {\n      color: \"#f6c179\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, Store.stakingInfo.SBPBalance, \" SBP \"))), /*#__PURE__*/React.createElement(Logo, {\n      src: shiba,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Input, {\n      style: {\n        marginTop: '1rem'\n      },\n      onChange: handleAmount,\n      value: stakingAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(FlexDiv, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(StakeButton, {\n      onClick: handleStake,\n      disabled: disable,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, \"STAKE SBP\"))));\n  });\n};\n\nexport default StakingBox;\nconst StakingWrapper = styled.div`\n  border-radius: 1rem;\n  border: solid 0.13rem #f6c179;\n  margin: 0 1rem 0 1rem;\n  background-color: #594139;\n`;\nconst SelectWrapper = styled.div`\n  background-color: #74564a;\n  border-radius: 0.85rem 0.85rem 0 0;\n  padding: 1rem;\n`;\nconst SelectBoxWrapper = styled.div`\n  padding: 0.5rem;\n  display: flex;\n  flex: 1 1 0;\n`;\nconst SelectBox = styled.button`\n  border-radius: 0.25rem;\n  border: ${props => props.checked ? 'solid 2px #fff' : 'none'};\n  /* margin: 0.1rem 0.5rem 0.1rem 0.5rem; */\n  margin: auto 0.1rem auto 0.1rem;\n  color: ${props => props.checked ? '#fff' : '#74564a'};\n  background-color: ${props => props.checked ? '#66ac5b' : '#d5ccc8'};\n  &:hover {\n    background-color: #66ac5b;\n    color: '#74564a';\n  }\n  font-family: Teko;\n  font-size: 1.3rem;\n  transition: background-color 0.25s ease-out 100ms;\n`;\nconst StakingInfoWrapper = styled.div`\n  padding: 1rem;\n  border-radius: 0 0 0.85rem 0.85rem;\n  background-color: #594139;\n  /* display: flex; */\n`;\nconst StakingInfo = styled.div`\n  flex: auto;\n  min-width: 11rem;\n`;\nconst Logo = styled.img`\n  width: 8rem;\n  @media (max-width: 500px) {\n    width: 6rem;\n  }\n  @media (max-width: 360px) {\n    width: 4rem;\n  }\n  object-fit: contain;\n\n  margin: 0 0 0 1rem;\n`;\nconst FlexDiv = styled.div`\n  display: flex;\n`;\nconst StakeButton = styled.button`\n  width: 7rem;\n  height: 2rem;\n  border-radius: 1rem;\n  border: solid 2px #d5ccc8;\n  background-color: #66ac5b;\n  font-family: Teko;\n  font-size: 1.3rem;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  /* line-height: 1; */\n  letter-spacing: normal;\n  text-align: center;\n  color: #fff;\n  margin: 1rem auto 0 auto;\n  ${props => {\n  if (props.disabled) {\n    return 'border: solid 2px #757575; background-color: #74564a; color: #757575';\n  }\n}}\n`;","map":{"version":3,"sources":["C:/Users/user/Desktop/shibapad_staking-main (2)/shibapad_staking-main/src/component/StakingBox.js"],"names":["React","useEffect","useState","styled","shiba","Store","Input","Text","Row","useObserver","useAlert","StakingBox","alert","stakingInfo","setStakingInfo","stakingAmount","setStakingAmount","disable","setDisable","storageId","account","Number","minAmount","SBPBalance","handleSelect","info","handleAmount","e","value","target","handleStake","getSBPBalance","then","res","stakeSBP","amount","console","log","result","show","msg","type","fetchAccountInfo","TVL","stakingPool","length","map","elem","index","name","rewardPercentage","accountStakingTotal","totalExpectedReward","tier","marginTop","StakingWrapper","div","SelectWrapper","SelectBoxWrapper","SelectBox","button","props","checked","StakingInfoWrapper","StakingInfo","Logo","img","FlexDiv","StakeButton","disabled"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport shiba from '../assets/shiba.png';\nimport Store from '../store/store';\nimport Input from './Input';\nimport { Text, Row } from './style';\nimport { useObserver } from 'mobx-react';\nimport { useAlert } from 'react-alert';\nconst StakingBox = () => {\n  const alert = useAlert();\n  const [stakingInfo, setStakingInfo] = useState({});\n  const [stakingAmount, setStakingAmount] = useState('');\n  const [disable, setDisable] = useState(true);\n\n  useEffect(() => {\n    if (\n      stakingInfo.storageId &&\n      stakingAmount &&\n      Store.account &&\n      Number(stakingInfo.minAmount) <= Number(stakingAmount) &&\n      Number(stakingAmount) <= Number(Store.stakingInfo.SBPBalance)\n    )\n      setDisable(false);\n    else setDisable(true);\n  }, [Store.stakingInfo.SBPBalance, Store.account, stakingAmount, stakingInfo]);\n\n  const handleSelect = info => setStakingInfo(info);\n\n  const handleAmount = e => {\n    const { value } = e.target;\n    if (value && value > 0) setStakingAmount(value);\n    if (!value) setStakingAmount('');\n  };\n\n  const handleStake = async () => {\n    Store.getSBPBalance().then(async res => {\n      if (\n        res &&\n        Store.account &&\n        stakingAmount > 0 &&\n        Number(stakingAmount) <= Number(Store.stakingInfo.SBPBalance)\n      ) {\n        await Store.stakeSBP({\n          amount: stakingAmount,\n          storageId: stakingInfo.storageId,\n        }).then(res => {\n          if (res) console.log('box', res);\n          if (res.result) {\n            // success\n            alert.show(res.msg, { type: 'success' });\n            Store.fetchAccountInfo();\n            // TVL, staking balance, total Expected Reward, tier, sbp balance, stakingList\n          } else {\n            // fail\n            alert.show(res.msg, { type: 'error' });\n          }\n        });\n      } else {\n        //balance err 표시\n      }\n    });\n  };\n  return useObserver(() => {\n    return (\n      <StakingWrapper>\n        <SelectWrapper>\n          <Row>\n            <Text color=\"#ffffff\">Total Value Locked : </Text>\n            <Text color=\"#f6c179\">{Store.stakingInfo.TVL} SBP</Text>\n          </Row>\n          <Row>\n            <Text color=\"#ffffff\">Release Date : </Text>\n          </Row>\n          <SelectBoxWrapper>\n            {Store.stakingPool &&\n              Store.stakingPool.length > 0 &&\n              Store.stakingPool.map((elem, index) => {\n                return (\n                  <SelectBox\n                    checked={stakingInfo.storageId === elem.storageId}\n                    onClick={() => handleSelect(elem)}\n                  >\n                    {elem.name}\n                  </SelectBox>\n                );\n              })}\n          </SelectBoxWrapper>\n          <Row>\n            <Text color=\"#ffffff\">APY for </Text>\n            <Text color=\"#66ac5b\">\n              {stakingInfo.name ? `${stakingInfo.name} : ` : null}\n            </Text>\n            <Text color=\"#f6c179\">\n              {stakingInfo.rewardPercentage\n                ? `${stakingInfo.rewardPercentage}%`\n                : null}\n            </Text>\n          </Row>\n          <Row>\n            <Text color=\"#ffffff\">Minimum Amount : </Text>\n            <Text color=\"#f6c179\">\n              {stakingInfo.minAmount ? `${stakingInfo.minAmount} SBP` : null}\n            </Text>\n          </Row>\n        </SelectWrapper>\n        <StakingInfoWrapper>\n          <FlexDiv>\n            <StakingInfo>\n              <Row>\n                <Text color=\"#d5ccc8\" width=\"10rem\">\n                  Your SBPS in Staking :{' '}\n                </Text>\n                <Text color=\"#f6c179\">\n                  {Store.stakingInfo.accountStakingTotal} SBP{' '}\n                </Text>\n              </Row>\n              <Row>\n                <Text color=\"#d5ccc8\" width=\"10rem\">\n                  ToTal Expected Reward :{' '}\n                </Text>\n                <Text color=\"#f6c179\">\n                  {Store.stakingInfo.totalExpectedReward}%{' '}\n                </Text>\n              </Row>\n              <Row>\n                <Text color=\"#d5ccc8\" width=\"10rem\">\n                  Account Tier :\n                </Text>\n                <Text color=\"#f6c179\">{Store.stakingInfo.tier} </Text>\n              </Row>\n              <Row>\n                <Text color=\"#d5ccc8\" width=\"10rem\">\n                  Account SBP Balance :{' '}\n                </Text>\n                <Text color=\"#f6c179\">{Store.stakingInfo.SBPBalance} SBP </Text>\n              </Row>\n            </StakingInfo>\n            <Logo src={shiba} />\n          </FlexDiv>\n          <Input\n            style={{ marginTop: '1rem' }}\n            onChange={handleAmount}\n            value={stakingAmount}\n          />\n          <FlexDiv>\n            <StakeButton onClick={handleStake} disabled={disable}>\n              STAKE SBP\n            </StakeButton>\n          </FlexDiv>\n        </StakingInfoWrapper>\n      </StakingWrapper>\n    );\n  });\n};\n\nexport default StakingBox;\n\nconst StakingWrapper = styled.div`\n  border-radius: 1rem;\n  border: solid 0.13rem #f6c179;\n  margin: 0 1rem 0 1rem;\n  background-color: #594139;\n`;\nconst SelectWrapper = styled.div`\n  background-color: #74564a;\n  border-radius: 0.85rem 0.85rem 0 0;\n  padding: 1rem;\n`;\nconst SelectBoxWrapper = styled.div`\n  padding: 0.5rem;\n  display: flex;\n  flex: 1 1 0;\n`;\nconst SelectBox = styled.button`\n  border-radius: 0.25rem;\n  border: ${props => (props.checked ? 'solid 2px #fff' : 'none')};\n  /* margin: 0.1rem 0.5rem 0.1rem 0.5rem; */\n  margin: auto 0.1rem auto 0.1rem;\n  color: ${props => (props.checked ? '#fff' : '#74564a')};\n  background-color: ${props => (props.checked ? '#66ac5b' : '#d5ccc8')};\n  &:hover {\n    background-color: #66ac5b;\n    color: '#74564a';\n  }\n  font-family: Teko;\n  font-size: 1.3rem;\n  transition: background-color 0.25s ease-out 100ms;\n`;\nconst StakingInfoWrapper = styled.div`\n  padding: 1rem;\n  border-radius: 0 0 0.85rem 0.85rem;\n  background-color: #594139;\n  /* display: flex; */\n`;\n\nconst StakingInfo = styled.div`\n  flex: auto;\n  min-width: 11rem;\n`;\nconst Logo = styled.img`\n  width: 8rem;\n  @media (max-width: 500px) {\n    width: 6rem;\n  }\n  @media (max-width: 360px) {\n    width: 4rem;\n  }\n  object-fit: contain;\n\n  margin: 0 0 0 1rem;\n`;\n\nconst FlexDiv = styled.div`\n  display: flex;\n`;\nconst StakeButton = styled.button`\n  width: 7rem;\n  height: 2rem;\n  border-radius: 1rem;\n  border: solid 2px #d5ccc8;\n  background-color: #66ac5b;\n  font-family: Teko;\n  font-size: 1.3rem;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  /* line-height: 1; */\n  letter-spacing: normal;\n  text-align: center;\n  color: #fff;\n  margin: 1rem auto 0 auto;\n  ${props => {\n    if (props.disabled) {\n      return 'border: solid 2px #757575; background-color: #74564a; color: #757575';\n    }\n  }}\n`;\n"]},"metadata":{},"sourceType":"module"}